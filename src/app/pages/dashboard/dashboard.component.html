<!-- Barra superior -->
<mat-toolbar class="custom-toolbar">
  <span class="title">Predix</span>
  <span class="spacer"></span>

  <div class="toolbar-icons">
    <button mat-icon-button class="icon-btn" (click)="toggleNotificaciones()" #notiBtn>
      <mat-icon>notifications</mat-icon>
      <span class="badge" *ngIf="alertas.length > 0">{{ alertas.length }}</span>
    </button>

    <button mat-icon-button matTooltip="Perfil de usuario" routerLink="/edit_user">
      <mat-icon>person</mat-icon>
    </button>

    <button mat-icon-button matTooltip="Cerrar sesión" (click)="logout()">
      <mat-icon>logout</mat-icon>
    </button>
  </div>
</mat-toolbar>

<!-- Contenedor principal -->
<mat-sidenav-container class="sidenav-container">
  <mat-sidenav mode="side" opened class="sidenav">
    <div class="icon-group" routerLink="/dashboard" routerLinkActive="active" matTooltip="Dashboard">
      <mat-icon class="icon-btn">dashboard</mat-icon>
      <span class="icon-label">Dashboard</span>
    </div>

    <div class="icon-group" routerLink="/my_students" routerLinkActive="active" matTooltip="Mis Estudiantes">
      <mat-icon class="icon-btn">groups</mat-icon>
      <span class="icon-label">Mis Estudiantes</span>
    </div>

    <div class="icon-group" routerLink="/register_notes_for_students" routerLinkActive="active" matTooltip="Registro Académico">
      <mat-icon class="icon-btn">calendar_today</mat-icon>
      <span class="icon-label">Académico</span>
    </div>

    <div class="icon-group" routerLink="/reports_students" routerLinkActive="active" matTooltip="Reportes">
      <mat-icon class="icon-btn">bar_chart</mat-icon>
      <span class="icon-label">Reportes</span>
    </div>

    <button mat-button class="register-btn" routerLink="/register_student">
      <mat-icon>person_add</mat-icon>
      Registrar estudiante
    </button>
  </mat-sidenav>

  <mat-sidenav-content class="main-content">
    <div class="main-content-body">
      <router-outlet></router-outlet>
    </div>

    <footer class="footer">
      <p>&copy; 2025 Predix - Todos los derechos reservados.</p>
    </footer>
  </mat-sidenav-content>
</mat-sidenav-container>

<div class="notificaciones-menu mat-elevation-z4" *ngIf="mostrarNotificaciones" #notiMenu>
  <h3>Notificaciones de Alerta</h3>
  <div *ngFor="let p of alertas" class="notificacion-alerta">
    <p><strong>Estudiante:</strong> {{ p.Codigo_estudiante }}</p>
    <p><strong>Curso:</strong> {{ p.curso }} | <strong>Trimestre:</strong> {{ p.trimestre }}</p>
    <p><strong>Rendimiento:</strong> {{ p.rendimiento }}</p>
    <p><strong>Observación:</strong> {{ p.observacion }}</p>
    <hr />
  </div>
</div>

